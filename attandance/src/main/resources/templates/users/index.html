<!DOCTYPE html>
<html lang="en" xmlns:th=" http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Uživatelé</title>
    <link rel="stylesheet" href="../static/css/users.css" th:href="@{/css/users.css}">
</head>
<body>
<div th:include="layout.html"></div>
<div class="page-content">
    <div id="jsGrid"></div>
</div>
</body>
</html>


<script>
    $(document).ready(function () {
        var users = [];
        $.ajax({
            url: "api/v1/user",
            data: "json",
            contentType: "application/json",
            method: "GET"
        }).then(function (items) {
            $.each(items, function (index, item) {
                users[index]['firstname'] = item['person']['firstname'];
                users[index]['lastname'] = item['person']['lastname'];
                users[index]['username'] = item['username'];
                users[index]['role'] = item['person']['role']["name"];
                users[index]['active'] = item['person']['active'];
                users[index]['company'] = item['company']['name'];
            });
            console.log(users);
        });

        $("#jsGrid").jsGrid({
            width: "100%",
            height: "400px",

            searching: true,
            editing: true,
            sorting: true,

            controller: users,

            fields: [
                { name: "firstname", type: "text", title: "Jméno", width: 60 },
                { name: "lastname", type: "text", title: "Příjmení", width: 60 },
                { name: "username", type: "text", title: "Příjmení", width: 60 },
                { name: "role", type: "text", title: "Typ", width: 30 },
                { name: "active", type: "checkbox", title: "Aktivní" , width: 20},
                { name: "company", type: "text", title: "Firma", width: 50},
                { type: "control", width: 50 }
            ]
        });
    });

</script>

